(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a7c5e210"],{"3a726":function(t,e,a){},4678:function(t,e,a){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c5","./az.js":"485c5","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e9","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e9","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=n(t);return a(e)}function n(t){var e=r[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}i.keys=function(){return Object.keys(r)},i.resolve=n,t.exports=i,i.id="4678"},"53ab":function(t,e,a){"use strict";var r=a("779c"),i=a.n(r);i.a},"5a3b":function(t,e,a){"use strict";var r=a("6462"),i=a.n(r);i.a},6462:function(t,e,a){},"68ce":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreeLoading,expression:"fullscreeLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"container",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("project-detail",{attrs:{titles:t.title}}),t._v(" "),a("statistics-table",{directives:[{name:"show",rawName:"v-show",value:t.flagToShowStatisticsTable,expression:"flagToShowStatisticsTable"}],attrs:{"option-list":t.optionList,"statistics-data":t.statisticsData}}),t._v(" "),a("div",{staticClass:"btn-switch"},[a("div",{staticStyle:{display:"inline-block","margin-right":"10px"}},[t._v("\n      工数单位:\n      "),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",size:"small"},on:{change:t.switchDaysUnit},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticStyle:{display:"inline-block","margin-right":"10px"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",size:"small"},on:{change:t.switchType},model:{value:t.quoteType,callback:function(e){t.quoteType=e},expression:"quoteType"}},t._l(t.costOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-switch",{attrs:{"active-text":"我的","inactive-text":"全部"},model:{value:t.quoteType,callback:function(e){t.quoteType=e},expression:"quoteType"}})],1),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.showStatisticsTable()}}},[t._v("显示统计")]),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini",disabled:""},on:{click:t.save}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"handsontable-wrapper",attrs:{id:"example-container"}},[t.showTable?a("HotTable",{ref:"textHot",attrs:{root:t.root,settings:t.hotSettings}}):t._e()],1),t._v(" "),a("div",{staticClass:"shadow",on:{mousedown:function(t){t.stopPropagation()}}},[a("i",{staticClass:"el-icon-d-arrow-right",on:{click:function(e){return t.hide_shadow()}}}),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.taskRecordLoading,expression:"taskRecordLoading"}],staticStyle:{position:"absolute",top:"0px",bottom:"0",left:"44px",right:"0px"}},[a("task-record",{attrs:{"task-record-list":t.taskRecordList,"task-record-title":t.taskRecordTitle}})],1)]),t._v(" "),a("point-dialog",{directives:[{name:"show",rawName:"v-show",value:t.pointVisible,expression:"pointVisible"}],attrs:{"point-visible":t.pointVisible,"selected-cell":t.selectedCell,"base-id":t.baseId,"quotation-id":t.quotationId},on:{"update:pointVisible":function(e){t.pointVisible=e},"update:point-visible":function(e){t.pointVisible=e},setDaysStatus:t.setDaysCellStyle}}),t._v(" "),a("man-day-dialog",{directives:[{name:"show",rawName:"v-show",value:t.manDayVisible,expression:"manDayVisible"}],attrs:{"selected-area":t.selectedArea,"dialog-width":200,"dialog-height":100}},[a("p",[a("span",[t._v("选中区域的总工数:")]),t._v(" "),a("span",[t._v(t._s(t.manDaySum))])]),t._v(" "),a("p",[a("span",[t._v("选中区域的已填写工数:")]),t._v(" "),a("span",[t._v(t._s(t.manDayNum))])])])],1)},i=[],n=(a("c5f6"),a("7618")),s=(a("28a5"),a("673e"),a("ac4d"),a("8a81"),a("ac6a"),a("5df3"),a("8033"),{startRows:100,startCols:100,minRows:0,minCols:0,maxRows:1e4,maxCols:1e4,rowHeaders:!0,minSpareCols:0,minSpareRows:0,currentRowClassName:"currentRow",currentColClassName:"currentCol",autoWrapRow:!0,autoRowSize:{syncLimit:500,allowSampleDuplicates:!0},autoColumnSize:{syncLimit:500,allowSampleDuplicates:!0},language:"zh-CN",collapsibleColumns:!0,className:"htLeft",fillHandle:{direction:"vertical",autoInsertRow:!1},manualColumnFreeze:!0,manualColumnMove:!1,manualRowMove:!1,manualColumnResize:!0,manualRowResize:!0,comments:!0,customBorders:[],columnSorting:!1,stretchH:"all",hiddenColumns:{indicators:!0},trimRows:[],exportFile:!0,dropdownMenu:!0,filters:!0}),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"point-container"},on:{mousewheel:function(t){t.preventDefault()},click:function(t){t.stopPropagation(),t.preventDefault()},mousedown:function(t){t.stopPropagation()}}},[a("h3",{staticClass:"point-title",staticStyle:{"margin-top":"0","margin-bottom":"5px"}},[t._v("指摘")]),t._v(" "),a("div",{staticClass:"point-title"},[a("span",[t._v("状态")]),t._v(" "),a("span",{staticClass:"xinhao"},[t._v("*")]),t._v(" "),a("span",[t._v(":")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.status=e.target.multiple?a:a[0]}}},[a("option",{staticStyle:{color:"#606266"},attrs:{value:"",disabled:"",hidden:""}},[t._v("请选择")]),t._v(" "),t._l(t.statusOptionsList,function(e,r){return a("option",{key:r},[t._v(t._s(e))])})],2)]),t._v(" "),t._m(0),t._v(" "),a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",autosize:{minRows:4,maxRows:4},clearable:!0},model:{value:t.issueComment,callback:function(e){t.issueComment=e},expression:"issueComment"}}),t._v(" "),a("div",{staticClass:"point-btn-bar"},[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:t.hiddenPoint}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.saveIssue}},[t._v("提交")])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.issueListLoading,expression:"issueListLoading"}],attrs:{id:"point-list"},on:{mousewheel:function(t){t.preventDefault()}}},t._l(t.issueRecord,function(e,r){return a("div",{key:r,staticClass:"point-list-item"},[a("div",{staticStyle:{"font-size":"14px",color:"#24292e!important","font-weight":"600"}},[t._v(t._s(e.comment))]),t._v(" "),a("div",{staticStyle:{"font-size":"12px",color:"#586069!important","line-height":"1.25!important"}},[t._v("#"+t._s(e.issue_user)+" "+t._s(e.status)+" "+t._s(e.commit_time))])])}),0),t._v(" "),a("i",{staticClass:"point-arrow",class:t.activePointArrow})],1)},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"point-title"},[a("span",[t._v("指摘内容")]),t._v(" "),a("span",{staticClass:"xinhao"},[t._v("*")]),t._v(" "),a("span",[t._v("：")])])}],u=a("b775");function c(){return Object(u["a"])({url:"/cost/show",method:"get"})}function d(){return Object(u["a"])({url:"/cost/show/myself",method:"get"})}function f(t){return Object(u["a"])({url:"/cost/update",method:"post",data:t})}function h(t){return Object(u["a"])({url:"/issue/cost/list/".concat(t),method:"get"})}function p(t){return Object(u["a"])({url:"/issue/add",method:"post",data:t})}function v(){return Object(u["a"])({url:"/project/group/list",method:"get"})}function g(){return Object(u["a"])({url:"/project/user/group/list",method:"get"})}var m={name:"PointDialog",model:{prop:"pointVisible",event:"click"},props:{pointVisible:{type:Boolean,default:!1},selectedCell:{type:Object,default:function(){return{}}},baseId:{type:Number,default:0},quotationId:{type:Number,default:0}},data:function(){return{issueComment:"",issueListLoading:!1,activePointArrow:"",issueRecord:[],statusOptionsList:[],status:""}},watch:{pointVisible:function(t){var e=this;t&&(this.calculatePointPosition(),0!==this.baseId&&(this.issueListLoading=!0,h(this.baseId).then(function(t){var a=t.data.content;e.issueRecord=a.issue_list,e.statusOptionsList=a.status_list,e.status="",e.issueComment="",e.issueListLoading=!1}).catch(function(){e.issueListLoading=!1})))}},methods:{hiddenPoint:function(){this.$emit("update:pointVisible",!1)},saveIssue:function(){var t=this,e=this.issueComment.trim(),a=this.status;if(""!==e&&""!==a){var r={comment:e,issue_user:this.userId=this.$cookies.get("userId"),base_id:this.baseId,status:a,quotation_id:this.quotationId};p(r).then(function(e){"OK"===e.data.result?(t.$emit("setDaysStatus",a),t.hiddenPoint(),t.$message({type:"success",message:"提交成功",duration:2e3})):t.$message({type:"error",message:"提交失败",duration:0,showClose:!0})})}else this.$message({type:"warning",message:"状态、指摘内容不能为空",duration:2e3})},calculatePointPosition:function(){var t,e,a=document.body.offsetWidth,r=document.body.offsetHeight,i=290,n=338,s=Number(this.selectedCell.width),o=Number(this.selectedCell.height),l=Number(this.selectedCell.top),u=Number(this.selectedCell.right);function c(t){return"left: "+t+"px;"}function d(t){return"top: "+t+"px;"}a>=u+i?(t=c(u+8),r>=l+n?(e=d(l),this.activePointArrow="point-arrow-left-top"):n>=l?(e=d(l),this.activePointArrow="point-arrow-left-top"):(e=d(l-n+o),this.activePointArrow="point-arrow-left-bottom")):(t=c(u-s-i),r>=l+n?(e=d(l),this.activePointArrow="point-arrow-right-top"):n>=l?(e=d(l),this.activePointArrow="point-arrow-right-top"):(e=d(l-n+o),this.activePointArrow="point-arrow-right-bottom"));var f=document.getElementById("point-container"),h=t+e;f.style=h}}},y=m,b=(a("e801"),a("2877")),w=Object(b["a"])(y,o,l,!1,null,"8756833a",null),_=w.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"man-day-container"},on:{mousewheel:function(t){t.preventDefault()},click:function(t){t.stopPropagation(),t.preventDefault()},mousedown:function(t){t.stopPropagation()}}},[t._t("default"),t._v(" "),a("i",{staticClass:"arrow",class:t.activeArrow})],2)},j=[],k={name:"ManDayDialog",props:{selectedArea:{type:Object,default:function(){return{}}},dialogWidth:{type:Number,default:200},dialogHeight:{type:Number,default:500}},data:function(){return{activeArrow:""}},watch:{selectedArea:function(t){this.calculatemanDayPosition()}},methods:{calculatemanDayPosition:function(){var t,e,a=document.body.offsetWidth,r=document.body.offsetHeight,i=this.dialogWidth+40,n=this.dialogHeight+40,s=Number(this.selectedArea.height),o=Number(this.selectedArea.top),l=Number(this.selectedArea.right);function u(t){return"left: "+t+"px;"}function c(t){return"top: "+t+"px;"}a>=l+i?(t=u(l+8),r>=o+n?(e=c(o),this.activeArrow="arrow-left-top"):n>=o?(e=c(o),this.activeArrow="arrow-left-top"):(e=c(o-n+s),this.activeArrow="arrow-left-bottom")):(t=u(l-i),r>=o+n?(e=c(o+s),this.activeArrow="arrow-top-right"):n>=o?(e=c(o-8),this.activeArrow="arrow-right-top"):(e=c(o-n+s),this.activeArrow="arrow-right-bottom"));var d=document.getElementById("man-day-container"),f=t+e+"width: "+this.dialogWidth+"px;height: "+this.dialogHeight+"px;";d.style=f}}},x=k,C=(a("c6cd"),Object(b["a"])(x,S,j,!1,null,"58aa6e9b",null)),D=C.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task-record"},[a("div",{staticClass:"task-record-container"},[a("div",{staticClass:"task-record-header"},[a("h1",[a("svg",{staticClass:"octicon",attrs:{viewBox:"0 0 12 16",version:"1.1",width:"12",height:"16","aria-hidden":"true"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"}})]),t._v("\n        履历:"+t._s(t.taskRecordTitle)+"\n      ")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.taskRecordList,stripe:"",size:"medium",border:"","header-cell-style":{background:"#f0f0f0"}}},[a("el-table-column",{attrs:{prop:"group_name",label:"组"}}),t._v(" "),a("el-table-column",{attrs:{prop:"option",label:"option"}}),t._v(" "),a("el-table-column",{attrs:{prop:"days",label:"cost"}}),t._v(" "),a("el-table-column",{attrs:{prop:"precondition",label:"前提"}}),t._v(" "),a("el-table-column",{attrs:{prop:"comment",label:"注释"}}),t._v(" "),a("el-table-column",{attrs:{prop:"update_user",label:"修改人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"update_time",label:"时间"}})],1)],1)])},O=[],T={name:"TaskRecord",props:{taskRecordList:{type:Array,default:function(){return{}}},taskRecordTitle:{type:String,default:""}},data:function(){return{}}},N=T,R=(a("8b1a"),Object(b["a"])(N,L,O,!1,null,"00746e2c",null)),M=R.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("el-breadcrumb",{staticStyle:{"padding-top":"10px","font-weight":"normal"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v(t._s(t.titles.projName))]),t._v(" "),a("el-breadcrumb-item",[t._v(t._s(t.titles.quotationName))]),t._v(" "),a("el-breadcrumb-item",[t._v(t._s(t.titles.version))])],1)],1)},z=[],A={name:"ProjectDetail",props:{titles:{type:Object,default:function(){return{}}}},data:function(){return{}}},H=A,G=(a("53ab"),Object(b["a"])(H,P,z,!1,null,"3b06e8a0",null)),I=G.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"statistics-table"}},[a("h3",[t._v("工数统计")]),t._v(" "),a("table",{attrs:{border:"1",width:"500px"}},[a("tr",[a("th",[t._v("大组")]),t._v(" "),a("th",[t._v("小组")]),t._v(" "),t._l(t.optionList,function(e,r){return a("th",{key:r},[t._v(t._s(e))])})],2),t._v(" "),t._l(t.statisticsData,function(e,r){return[0==e.children.length?[a("tr",{key:r},[a("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"2"}},[t._v(t._s(e.group))]),t._v(" "),t._l(t.optionList,function(r,i){return a("td",{key:i},[t._v(t._s(e[r]))])})],2)]:[a("tr",{key:r},[a("td",{staticStyle:{"text-align":"left"},attrs:{colspan:"2"}},[t._v(t._s(e.group))]),t._v(" "),t._l(t.optionList,function(r,i){return a("td",{key:i},[t._v(t._s(e[r]))])})],2),t._v(" "),t._l(e.children,function(e,r){return a("tr",{key:r},[a("td"),t._v(" "),a("td",[t._v(t._s(e.group))]),t._v(" "),t._l(t.optionList,function(r,i){return a("td",{key:i},[t._v(t._s(e[r]))])})],2)})]]})],2)])},J=[],q={name:"StatisticsTable",props:{optionList:{type:Array,default:function(){return[]}},statisticsData:{type:Array,default:function(){return[]}}},data:function(){return{}}},$=q,B=(a("81a6"),Object(b["a"])($,V,J,!1,null,"bff06444",null)),F=B.exports,E=a("1699");function Q(t,e,a,r,i,n,s){E["default"].renderers.TextRenderer.apply(this,arguments)}function K(t,e,a,r,i,n,s){E["default"].renderers.TextRenderer.apply(this,arguments),e.style.background="#85ce61",e.style.color="#fff",e.style["box-sizing"]="border-box"}function W(t,e,a,r,i,n,s){E["default"].renderers.TextRenderer.apply(this,arguments),e.style.background="#d73a4a",e.style.color="#fff",e.style["box-sizing"]="border-box"}function U(t,e,a,r,i,n,s){E["default"].renderers.TextRenderer.apply(this,arguments),e.style.background="#7057ff",e.style.color="#fff",e.style["box-sizing"]="border-box"}function X(t,e,a,r,i,n,s){var o=null;return o=document.createElement("div"),o.style="max-height: 100%;overflow-y: auto;overflow-x:hidden;text-align:left;",o.innerText=n,tt.dom.empty(e),e.appendChild(o),e}function Y(t,e,a,r,i,n,s){var o=s.row,l=t.getSourceData();if(0===l.length)return e;for(var u=l[o],c=i.split("."),d=c.length-1,f=0;f<d;f++){var h=c[f];u=u[h]}var p=u.issue_status;switch(E["default"].renderers.TextRenderer.apply(this,arguments),p){case"打开":e.style.backgroundColor="#FFCCCC";break;case"已确认":e.style.backgroundColor="#CCFFCC";break;default:break}return e}E["default"].renderers.registerRenderer("noneCellRenderer",Q),E["default"].renderers.registerRenderer("checkingCellRenderer",K),E["default"].renderers.registerRenderer("issueCellRenderer",W),E["default"].renderers.registerRenderer("acceptCellRenderer",U);var Z=function(t,e,a){e.row<0&&t.stopImmediatePropagation()};E["default"].hooks.add("beforeOnCellMouseDown",Z);var tt=E["default"],et=a("3c78"),at=a("5c96"),rt=(a("250e"),a("4f7f"),a("75fc"));function it(t){var e=[],a=!0,r=!1,i=void 0;try{for(var n,s=t[Symbol.iterator]();!(a=(n=s.next()).done);a=!0)for(var o=n.value,l=Math.min(o[0],o[2]),u=Math.max(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[1],o[3]),f=l;f<=u;f++)for(var h=c;h<=d;h++)e.push(f+","+h)}catch(v){r=!0,i=v}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}var p=Object(rt["a"])(new Set(e));return p}var nt={name:"指摘",disabled:function(){var t=this.getSelected();if("undefined"===typeof t)return!0;if(t.length>1)return!0;if(t[0][0]===t[0][2]&&t[0][1]===t[0][3]){var e=this.colToProp(t[0][1]),a=e.split("."),r=a.length-1;if("days"===a[r]){var i=t[0][0],n=this.getSourceData()[i];a.splice(r,1);var s=n,o=!0,l=!1,u=void 0;try{for(var c,d=a[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var f=c.value;s=s[f]}}catch(v){l=!0,u=v}finally{try{o||null==d.return||d.return()}finally{if(l)throw u}}var h="base_id",p=s[h];if(0!==p)return!1}}return!0},callback:function(){}};function st(t){var e=[];return e[0]=t.func_task_list.map(function(t){return t}),e[1]=t.option_list,e[2]=t.cost_list,e}function ot(t){var e=[];switch(t.length){case 3:for(var a=0;a<t[1].length;a++)for(var r=0;r<t[2].length;r++){var i=t[1][a]+"."+t[2][r];e.push(i)}break;default:for(var n=0;n<t[1].length;n++)for(var s=0;s<t[2].length;s++)for(var o=0;o<t[3].length;o++){var l=t[1][n]+"."+t[2][s]+"."+t[3][o];e.push(l)}break}return e}function lt(t){var e=/^[0-9]+$/,a=/^[0-9]+\.?[0-9]+?$/;return!(!e.test(t)&&!a.test(t)&&null!==t&&""!==t)}function ut(t){return""===t||null===t||void 0===t}var ct={name:"QuoteTable",components:{HotTable:et["a"],PointDialog:_,TaskRecord:M,ManDayDialog:D,ProjectDetail:I,StatisticsTable:F},data:function(){return{showMessageFlag:!1,fullscreeLoading:!1,taskRecordLoading:!1,projId:"",quotationId:0,showTable:!1,selectOptionsData:{},headersData:[],root:"test-hot",hotSettings:{data:[],colHeaders:[],className:"htLeft",contextMenu:{items:{row_below:{name:"拆分Task"},remove_row:{name:"删除行"}}}},manDaySum:0,manDayNum:0,funcTaskList:[],costList:[],groupList:[],optionList:[],pointVisible:!1,manDayVisible:!1,baseId:0,row:null,col:null,activePointArrow:"",selectedCell:{width:null,height:null,top:null,left:null},selectedArea:{width:null,height:null,top:null,left:null},colProp:[],taskRecordList:[],taskRecordTitle:"",pointList:[],deleteList:[],title:{projName:"",quotationName:"",version:""},quoteType:!0,switchNum:0,tempColumns:[],options:[{value:"day",label:"人/日"},{value:"month",label:"人/月"}],value:"month",costOptions:[{value:!0,label:"我的"},{value:!1,label:"全部"}],myGroupList:[],flatGroupList:{},costSumObj:{},statisticsData:[],flagToShowStatisticsTable:!1,newTaskGroup:{}}},watch:{},created:function(){var t=this,e=this;this.fullscreeLoading=!0,this.hotSettings=Object.assign(this.hotSettings,s);var a=new Promise(function(t,e){g().then(function(e){t(e.data.content)}).catch(function(){e()})}),r=new Promise(function(t,e){v().then(function(a){"OK"===a.data.result?t(a.data.content):e()})});Promise.all([a,r]).then(function(e){var a=e[0],r=e[1];function i(t,e){var a={},r=!0,i=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value;if(e[0]["group_name"]===l["group_name"]){a.superGroup=e[0]["group_name"],a.group="";break}var u=!0,c=!1,d=void 0;try{for(var f,h=l.sub[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value;if(e[0]["group_name"]===p["group_name"])return a.superGroup=l["group_name"],a.group=p["group_name"],a}}catch(v){c=!0,d=v}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}}}catch(v){i=!0,n=v}finally{try{r||null==o.return||o.return()}finally{if(i)throw n}}}function n(t){var e={},r=!0,i=!1,n=void 0;try{for(var s,o=a[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value;e[l["group_name"]]=l["group_id"];var u=!0,c=!1,d=void 0;try{for(var f,h=l.sub[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value;e[p["group_name"]]=p["group_id"]}}catch(v){c=!0,d=v}finally{try{u||null==h.return||h.return()}finally{if(c)throw d}}}}catch(v){i=!0,n=v}finally{try{r||null==o.return||o.return()}finally{if(i)throw n}}return e}t.myGroupList=e[0],t.superGroupList=e[1],0===a[0].sub.length?t.newTaskGroup=i(r,a):(t.newTaskGroup.superGroup=a[0]["group_name"],t.newTaskGroup.group=a[0].sub[0]["group_name"]),t.flatGroupList=n(a)}).catch(function(t){console.log("error")}),this.hotSettings.afterDeselect=function(){e.hiddenDialog()},this.hotSettings.beforeOnCellMouseDown=function(t,a,r,i){var n=this.getPlugin("filters").trimRowsPlugin.rowsMapper.__arrayMap,s=a.row,o=n[s],l=a.col,u=this.colToProp(l),c=this.getDataAtCell(o,l-1),d=e.superGroupList;if("group"===u){var f=!0,h=!1,p=void 0;try{for(var v,g=d[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m=v.value;if(m.group_name===c){var y=m.sub.map(function(t){return t.group_name});this.setCellMeta(o,l,"source",y);break}}}catch(b){h=!0,p=b}finally{try{f||null==g.return||g.return()}finally{if(h)throw p}}}},this.hotSettings.beforeChange=function(t,a){var r=this.getPlugin("filters").trimRowsPlugin.rowsMapper.__arrayMap,i=!0,n=!1,s=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value,c=u[0],d=r[c],f=u[1],h=u[2],p=u[3];if("number"===typeof f)return;var v=f.split("."),g=v.length,m=e.hotSettings.data[d],y=JSON.parse(JSON.stringify(m));if(m["task_id"],1===g&&"task1"===f){var b=!0,w=!1,_=void 0;try{for(var S,j=e.optionList[Symbol.iterator]();!(b=(S=j.next()).done);b=!0){var k=S.value;if("已提出"===m[k]["status"]||"已承认"===m[k]["status"])return Object(at["Message"])({message:"工数‘已提出’和‘已承认’状态下,不能修改Task。请先修改状态,再修改Task。",type:"warning",showClose:!0,duration:3e3}),!1}}catch(rt){w=!0,_=rt}finally{try{b||null==j.return||j.return()}finally{if(w)throw _}}}if(2===v.length&&("days"===v[1]||"precondition"===v[1]||"comment"===v[1])){for(var x=0;x<g-1;x++){var C=v[x];y=y[C]}var D=y["status"];if("已提出"===D||"已承认"===D)return Object(at["Message"])({message:"工数‘已提出’和‘已承认’状态下,不允许修改。请先修改状态改，再修改其他值。",type:"warning",showClose:!0,duration:3e3}),!1}if(("superGroup"===f||"group"===f)&&h!==p){var L=!0,O=!1,T=void 0;try{for(var N,R=e.optionList[Symbol.iterator]();!(L=(N=R.next()).done);L=!0){var M=N.value,P=!0,z=!1,A=void 0;try{for(var H,G=e.costList[Symbol.iterator]();!(P=(H=G.next()).done);P=!0){var I=H.value;if(!ut(m[M][I]))return Object(at["Message"])({message:"有工数信息的Task,不能指派给其他的组。请先清空cost、preondition、 comment和status,再指派。",type:"warning",showClose:!0,duration:5e3}),!1}}catch(rt){z=!0,A=rt}finally{try{P||null==G.return||G.return()}finally{if(z)throw A}}}}catch(rt){O=!0,T=rt}finally{try{L||null==R.return||R.return()}finally{if(O)throw T}}}if(("task1"===f||"superGroup"===f)&&ut(p))return!1;var V=e.hotSettings.data,J=[],q=e.superGroupList,$=V[d].superGroup;if(p!==h&&"group"===f&&""!==p){var B=!0,F=!1,E=void 0;try{for(var Q,K=q[Symbol.iterator]();!(B=(Q=K.next()).done);B=!0){var W=Q.value;if(W.group_name===$){J=W.sub;break}}}catch(rt){F=!0,E=rt}finally{try{B||null==K.return||K.return()}finally{if(F)throw E}}if(0!==J.length){var U=!0,X=!1,Y=void 0;try{for(var Z,tt=J[Symbol.iterator]();!(U=(Z=tt.next()).done);U=!0){var et=Z.value;if(et.group_name===p)return}}catch(rt){X=!0,Y=rt}finally{try{U||null==tt.return||tt.return()}finally{if(X)throw Y}}}u[3]=""}}}catch(rt){n=!0,s=rt}finally{try{i||null==l.return||l.return()}finally{if(n)throw s}}},this.hotSettings.afterChange=function(t,a){var r=this,i=this.getPlugin("filters").trimRowsPlugin.rowsMapper.__arrayMap;if(null==t);else{var s=!0,o=!1,l=void 0;try{for(var u,c=function(){var t=u.value,a=t[0],n=i[a],s=t[1],o=t[2],l=t[3],c=e.hotSettings.data;if(l!==o){c[n].action="change";var d=s.split("."),f=null;if(1===d.length){if(f=s.split(".")[0],"superGroup"===f){var h=r.propToCol(s)+1;if(""===l)r.setDataAtCell(n,h,"");else{var p=[],v=e.superGroupList,g=!0,m=!1,y=void 0;try{for(var b,w=v[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var _=b.value;if(_.group_name===l){p=_.sub;break}}}catch(T){m=!0,y=T}finally{try{g||null==w.return||w.return()}finally{if(m)throw y}}var S=c[n].group,j=!0,k=!1,x=void 0;try{for(var C,D=p[Symbol.iterator]();!(j=(C=D.next()).done);j=!0){var L=C.value;if(L.group_name===S)return{v:void 0}}}catch(T){k=!0,x=T}finally{try{j||null==D.return||D.return()}finally{if(k)throw x}}r.setDataAtCell(n,h,"")}}}else if(f=s.split(".")[1],"precondition"===f){if(""===l)return{v:void 0};var O=e.selectOptionsData[f].filter(function(t){return t===l});0===O.length&&e.selectOptionsData[f].push(l)}}},d=t[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var f=c();if("object"===Object(n["a"])(f))return f.v}}catch(g){o=!0,l=g}finally{try{s||null==d.return||d.return()}finally{if(o)throw l}}}var h=JSON.parse(JSON.stringify(e.hotSettings.data)),p=e.getVisualData(h,i);if(e.setNestedHeadersDays(p),e.flagToShowStatisticsTable){var v=h;e.statisticsData=e.getTaskManHourStatistics(v)}},this.hotSettings.afterFilter=function(){var t=this.getPlugin("filters").trimRowsPlugin.rowsMapper.__arrayMap,a=e.hotSettings.data,r=e.getVisualData(a,t);e.setNestedHeadersDays(r)},this.hotSettings.contextMenu.items.remove_row={name:"删除行",disabled:function(){var t=this.getSelected(),a=e.hotSettings.data,r=this.getSelectedLast()[0],i=a[r];if("undefined"===typeof t)return!0;if(t.length>1)return!0;if(t[0][0]===t[0][2]){if(0===i["task_id"])return!1;var n=i["group"],s=i["superGroup"];return ut(n)?!e.flatGroupList.hasOwnProperty(s):!e.flatGroupList.hasOwnProperty(n)}return!0}},this.hotSettings.contextMenu.items.remove_row.callback=function(){var t=this,a=this.getSelectedLast()[0];e.$confirm("确认移除改行？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){t.alter("remove_row",a)}).catch(function(t){})},this.hotSettings.beforeRemoveRow=function(t,a,r){var i=JSON.parse(JSON.stringify(e.hotSettings.data));e.deleteList.push(i[r])},this.hotSettings.afterRemoveRow=function(){var t=this.getPlugin("filters").trimRowsPlugin.rowsMapper.__arrayMap,a=e.getVisualData(JSON.parse(JSON.stringify(e.hotSettings.data)),t);if(e.setNestedHeadersDays(a),e.flagToShowStatisticsTable){var r=JSON.parse(JSON.stringify(e.hotSettings.data));e.statisticsData=e.getTaskManHourStatistics(r)}},this.hotSettings.afterCreateRow=function(t,a,r){var i=e.hotSettings.data,n=this.getSourceData(),s=this.getPlugin("filters").trimRowsPlugin.rowsMapper.__arrayMap;i.length!==n&&(i=n);var o=s[t-1],l=t-1,u=null;u=0!==s?JSON.parse(JSON.stringify(i[o])):JSON.parse(JSON.stringify(i[l]));var c=e.funcTaskList,d=function(t){var a=u[t],r=e.optionList,i=!0,n=!1,s=void 0;try{for(var o,l=r[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var d=o.value;if(t!==d);else for(var f in a)a[f]=null}}catch(g){n=!0,s=g}finally{try{i||null==l.return||l.return()}finally{if(n)throw s}}var h=e.newTaskGroup["superGroup"],p=e.newTaskGroup["group"],v=h+"_Task";switch(t){case"superGroup":u[t]=h;break;case"group":u[t]=p;break;case"group_name_list":u[t]=[];break;case"action":u[t]="";break;case"task_id":u[t]=0;break;case"category_name":break;default:break}c.map(function(e){"task1"!==t||(u[t]=v)})};for(var f in u)d(f);u["category"]="",u["action"]="change",i.splice(t,1,u),e.hotSettings.data=i;var h=e.getVisualData(i,s);if(e.setNestedHeadersDays(h),e.flagToShowStatisticsTable){var p=JSON.parse(JSON.stringify(i));e.statisticsData=e.getTaskManHourStatistics(p)}},this.hotSettings.contextMenu.items.issue=nt,this.hotSettings.contextMenu.items.issue.callback=function(t,a,r){var i=this.getPlugin("filters").trimRowsPlugin.rowsMapper.__arrayMap,n=this.getSelected(),s=n[0][0],o=n[0][1],l=i[s],u=e.hotSettings.data,c=u[l];e.row=l,e.col=o;var d=this.getCell(s,o),f=this.colToProp(n[0][1]),h=f.split(".");e.colProp=f;var p=h.length-1;h.splice(p,1);var v=c,g=!0,m=!1,y=void 0;try{for(var b,w=h[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var _=b.value;v=v[_]}}catch(k){m=!0,y=k}finally{try{g||null==w.return||w.return()}finally{if(m)throw y}}var S="base_id",j=v[S];e.baseId=Number(j),e.pointVisible=!0,e.selectedCell=Object.assign({},e.selectedCell,{width:Number(d.getClientRects()[0].width),height:Number(d.getClientRects()[0].height),top:Number(d.getClientRects()[0].top),right:Number(d.getClientRects()[0].right)})},this.hotSettings.beforeKeyDown=function(t){var e=this.countRows(),a=this.getSelectedLast();if(void 0!==a){var r=a[0];r+1===e&&40===t.keyCode&&t.stopImmediatePropagation(),0===r&&38===t.keyCode&&t.stopImmediatePropagation()}},this.hotSettings.afterScrollHorizontally=function(){e.hiddenDialog()},this.hotSettings.afterScrollVertically=function(){e.hiddenDialog()},this.hotSettings.afterSelectionEnd=function(t,a,r,i,n){var s=this;e.hiddenDialog();var o=this.getColHeader().length;if(i-a+1!==o)if(t!==r||a!==i){var l=e.hotSettings.fixedColumnsLeft,u=this.getSelected(),c=it(u),d=0,f=0;if(d=c.reduce(function(t,e){var a=e.split(","),r=a[0],i=a[1],n=s.getDataAtCell(r,i);return"number"===typeof n?(f++,t+n):t},0),0!==d){e.manDaySum=d,e.manDayNum=f;var h=null;if(i>a){if(i<l)return;h=this.getCell(r,i),e.showManDayDialog(h)}else if(i<a){if(a<l)return;h=this.getCell(t,a),e.showManDayDialog(h)}else{if(a<l)return;this.getSelected()[0].length>1&&(t>r?(h=this.getCell(t,a),e.showManDayDialog(h)):(h=this.getCell(r,a),e.showManDayDialog(h)))}}}else e.hiddenDialog()},this.getMyQuotation()},mounted:function(){},methods:{showStatisticsTable:function(){if(!this.flagToShowStatisticsTable){var t=JSON.parse(JSON.stringify(this.hotSettings.data));this.statisticsData=this.getTaskManHourStatistics(t)}this.flagToShowStatisticsTable=!this.flagToShowStatisticsTable},showManDayDialog:function(t){this.manDayVisible=!0,this.selectedArea=Object.assign({},this.selectedArea,{width:Number(t.getClientRects()[0].width),height:Number(t.getClientRects()[0].height),top:Number(t.getClientRects()[0].top),right:Number(t.getClientRects()[0].right)})},setBasicConfig:function(t){var e=this,a=[],r=[],i=[[],["category"]],n=0;this.selectOptionsData=t.data.content.select_data;var s=t.data.content;this.funcTaskList=s.func_task_list,this.costList=s.cost_list,this.optionList=s.option_list;var o=st(s),l=ot(o);n=o[0].length+1,a.unshift({data:"category_name",readOnly:!0}),o[0].map(function(t){var r;switch(t){case"分配大组":r={data:"superGroup",type:"dropdown",source:e.superGroupList.map(function(t){return t.group_name}),visibleRows:10,trimDropdown:!0,strict:!0,allowInvalid:!1};break;case"分配小组":r={data:"group",type:"dropdown",source:e.superGroupList.reduce(function(t,e){return t.concat(e.sub.map(function(t){return t.group_name}))},[]),visibleRows:10,trimDropdown:!0,strict:!0,allowInvalid:!1};break;default:r={data:t,editor:-1!==t.indexOf("task")&&"text",readOnly:-1===t.indexOf("task"),width:120};break}a.push(r)}),l.map(function(t,r){var i=t.split(".")[1],n={data:t};switch(i){case"days":n.type="numeric",n.renderer=Y;break;case"precondition":n.type="autocomplete",n.source=e.selectOptionsData[i],n.visibleRows=10,n.trimDropdown=!0;break;case"status":n.type="dropdown",n.source=e.selectOptionsData[i],n.visibleRows=10,n.trimDropdown=!0,n.strict=!0,n.allowInvalid=!1;break;case"comment":n.renderer=X;break;default:break}a.push(n)});var u=t.data.content.data_list;if(0!==u.length){r=u;var c=!0,d=!1,f=void 0;try{for(var h,p=r[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var v=h.value;v.superGroup="undefined"===typeof v.group_name_list[0]?"":v.group_name_list[0],v.group="undefined"===typeof v.group_name_list[1]?"":v.group_name_list[1]}}catch(Q){d=!0,f=Q}finally{try{c||null==p.return||p.return()}finally{if(d)throw f}}}var g=o[0].length;i[0].push("Item and Scope");for(var m=0;m<g;m++)-1===o[0][m].indexOf("task")?i[1].push(o[0][m]):i[1].push("Task");for(var y=0;y<o[1].length;y++)for(var b=0;b<o[2].length;b++)"days"===o[2][b]?i[1].push("cost"):i[1].push(o[2][b]);for(var w=0;w<g;w++)i[0].push("");this.costSumObj={};for(var _=0;_<o[1].length;_++)this.costSumObj[o[1][_]]=0;var S=this.groupList,j=this.optionList,k="days";if("month"===this.value){var x=.05;this.transDayForSave(r,x,j,S,k)}var C=!0,D=!1,L=void 0;try{for(var O,T=r[Symbol.iterator]();!(C=(O=T.next()).done);C=!0){var N=O.value,R=!0,M=!1,P=void 0;try{for(var z,A=o[1][Symbol.iterator]();!(R=(z=A.next()).done);R=!0){var H=z.value,G=N[H][k];this.costSumObj[H]=this.costSumObj[H]+G}}catch(Q){M=!0,P=Q}finally{try{R||null==A.return||A.return()}finally{if(M)throw P}}}}catch(Q){D=!0,L=Q}finally{try{C||null==T.return||T.return()}finally{if(D)throw L}}for(var I=0;I<o[1].length;I++)i[0].push({label:o[1][I]+"(工数:"+this.costSumObj[o[1][I]]+")",colspan:4});var V=!0,J=!1,q=void 0;try{for(var $,B=r[Symbol.iterator]();!(V=($=B.next()).done);V=!0){var F=$.value;F["oldSuperGroup"]=F["superGroup"],F["oldGroup"]=F["group"]}}catch(Q){J=!0,q=Q}finally{try{V||null==B.return||B.return()}finally{if(J)throw q}}if(this.hotSettings.fixedColumnsLeft=n,this.hotSettings.columns=a,this.hotSettings.data=r,this.hotSettings.nestedHeaders=i,this.flagToShowStatisticsTable){var E=JSON.parse(JSON.stringify(r));this.statisticsData=this.getTaskManHourStatistics(E)}},getVisualData:function(t,e){var a=[],r=!0,i=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value;a.push(t[l])}}catch(u){i=!0,n=u}finally{try{r||null==o.return||o.return()}finally{if(i)throw n}}return a},setNestedHeadersDays:function(t){var e=this.optionList,a=e.length,r=this.hotSettings.nestedHeaders[0].length,i=r-a,n="days",s="label";for(var o in this.costSumObj)this.costSumObj[o]=0;var l=!0,u=!1,c=void 0;try{for(var d,f=t[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value,p=!0,v=!1,g=void 0;try{for(var m,y=e[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var b=m.value,w=h[b][n];"number"===typeof w&&(this.costSumObj[b]=this.costSumObj[b]+w)}}catch(x){v=!0,g=x}finally{try{p||null==y.return||y.return()}finally{if(v)throw g}}}}catch(x){u=!0,c=x}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}for(var _=this.costSumObj,S=0;S<a;S++){var j=S+i,k=e[S];this.hotSettings.nestedHeaders[0][j][s]=k+"(工数:"+_[k]+")"}},getMyQuotation:function(){var t=this,e=new Promise(function(e,a){d().then(function(r){"OK"===r.data.result?(console.log(r,"res====---------------"),t.setQuotationDetail(r),e(r)):a()})}),a=new Promise(function(t,e){v().then(function(a){"OK"===a.data.result?t(a.data.content):e()})});Promise.all([e,a]).then(function(e){t.superGroupList=e[1],t.setBasicConfig(e[0]),t.quoteType=!0,t.showTable=!0}).then(function(){var e=document.getElementById("hot-display-license-info");e.style="display:none",t.fullscreeLoading=!1,t.showMessageFlag&&(Object(at["Message"])({message:"保存成功",type:"success",showClose:!1,duration:1e3}),t.showMessageFlag=!1)}).catch(function(){t.fullscreeLoading=!1})},getAllQuotation:function(){var t=this,e=new Promise(function(e,a){c().then(function(r){"OK"===r.data.result?(t.setQuotationDetail(r),e(r)):a()}).then(function(){t.fullscreeLoading=!1,t.showMessageFlag&&(Object(at["Message"])({message:"保存成功",type:"success",showClose:!1,duration:1e3}),t.showMessageFlag=!1)}).catch(function(e){t.fullscreeLoading=!1})}),a=new Promise(function(t,e){v().then(function(a){"OK"===a.data.result?t(a.data.content):e()})});Promise.all([e,a]).then(function(e){t.superGroupList=e[1],t.setBasicConfig(e[0]),t.quoteType=!1}).then(function(){var e=document.getElementById("hot-display-license-info");e.style="display:none",t.fullscreeLoading=!1}).catch(function(){t.fullscreeLoading=!1})},switchType:function(){var t=this;at["MessageBox"].confirm("此操作将会失去填写数据, 是否继续?","提示",{cancelButtonClass:"btn-custom-cancel",confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.fullscreeLoading=!0,t.getDiffTypeData()}).catch(function(){t.quoteType=!t.quoteType})},getDiffTypeData:function(){0===this.switchNum&&(this.switchNum=1),this.quoteType?this.getMyQuotation():this.getAllQuotation()},hiddenDialog:function(){this.pointVisible=!1,this.manDayVisible=!1},setDaysCellStyle:function(t){var e=this.row,a=this.hotSettings.data,r=a[e],i=this.colProp,n=i.split("."),s=n.length-1;n.splice(s,1);var o=r,l=!0,u=!1,c=void 0;try{for(var d,f=n[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value;o=o[h]}}catch(p){u=!0,c=p}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}o.issue_status=t,this.hotSettings.data=a},save:function(){var t=this,e=this.$createElement;this.showMessageFlag=!0,this.fullscreeLoading=!0;var a=JSON.parse(JSON.stringify(this.hotSettings.data)).map(function(t){return t.group_name_list=[],""!==t.superGroup&&(t.group_name_list[0]=t.superGroup,""!==t.group&&(t.group_name_list[1]=t.group)),t}),r=this.transDayAfterSave(a,this.value);if(!r)return this.fullscreeLoading=!1,void Object(at["Message"])({message:"填写不规范,请修改!",type:"warning",showClose:!1,duration:3e3});var i={},n=[],s=!0,o=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value,h=!0,p=!1,v=void 0;try{for(var g,m=this.optionList[Symbol.iterator]();!(h=(g=m.next()).done);h=!0){var y=g.value;""!==d[y]["precondition"]&&(i[d[y]["precondition"]]=null)}}catch(_){p=!0,v=_}finally{try{h||null==m.return||m.return()}finally{if(p)throw v}}}}catch(_){o=!0,l=_}finally{try{s||null==c.return||c.return()}finally{if(o)throw l}}for(var b in i)n.push(b);this.selectOptionsData.precondition=n;var w={quotation_id:this.quotationId,commit_user:this.userId,select_data:this.selectOptionsData,data_list:r,func_task_list:this.funcTaskList,group_list:this.groupList,cost_list:this.costList,option_list:this.optionList,delete_list:this.deleteList};f(w).then(function(a){"OK"===a.data.result?(t.getNewDataAfterSave(),t.switchNum=1):"NG"===a.data.result?(Object(at["Message"])({message:a.data.error,type:"error",showClose:!0,duration:3e3}),t.fullscreeLoading=!1):(t.$msgbox({title:"冲突提示",message:e("warning-table",{attrs:{warningMsg:a.data.content}}),showConfirmButton:!0,showCancelButton:!1}),t.fullscreeLoading=!1)}).catch(function(e){t.fullscreeLoading=!1})},getNewDataAfterSave:function(){this.quoteType?this.getMyQuotation():this.getAllQuotation()},showHistory:function(t){},hide_shadow:function(){},setQuotationDetail:function(t){var e=t.data.content;this.title.projName="项目名："+e.proj_name,this.title.quotationName="报价名："+e.quotation_name,this.title.version="版本："+e.quotation_ver},switchDaysUnit:function(t){var e=this.$refs.textHot.hotInstance.getPlugin("filters").trimRowsPlugin.rowsMapper.__arrayMap,a=this.optionList,r=this.hotSettings.data,i="days",n=1;n="day"===t?20:.05,this.transHistoryCost(n);var s=!0,o=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value,f=!0,h=!1,p=void 0;try{for(var v,g=a[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m=v.value;lt(d[m][i])?""===d[m][i]||null===d[m][i]?d[m][i]=null:(d[m][i]=d[m][i]*n,d[m][i]=Math.round(100*d[m][i])/100):d[m][i]=null}}catch(b){h=!0,p=b}finally{try{f||null==g.return||g.return()}finally{if(h)throw p}}}}catch(b){o=!0,l=b}finally{try{s||null==c.return||c.return()}finally{if(o)throw l}}var y=this.getVisualData(r,e);this.setNestedHeadersDays(y),this.hotSettings.data=y},transHistoryCost:function(t){this.taskRecordList=this.taskRecordList.map(function(e){return e.days=e.days*t,e})},transDay:function(t,e,a,r,i){var n=!0,s=!1,o=void 0;try{for(var l,u=t[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value,d=!0,f=!1,h=void 0;try{for(var p,v=a[Symbol.iterator]();!(d=(p=v.next()).done);d=!0){var g=p.value;lt(c[g][i])?""===c[g][i]||null===c[g][i]?c[g][i]=null:(c[g][i]=c[g][i]*e,c[g][i]=Math.round(100*c[g][i])/100):c[g][i]=null}}catch(m){f=!0,h=m}finally{try{d||null==v.return||v.return()}finally{if(f)throw h}}}}catch(m){s=!0,o=m}finally{try{n||null==u.return||u.return()}finally{if(s)throw o}}},transDayAfterSave:function(t,e){var a=this.groupList,r=this.optionList,i="days",n=0;return n="month"===e?20:1,this.transDayForSave(t,n,r,a,i)},transDayForSave:function(t,e,a,r,i){var n=!0,s=!1,o=void 0;try{for(var l,u=t[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value,d=!0,f=!1,h=void 0;try{for(var p,v=a[Symbol.iterator]();!(d=(p=v.next()).done);d=!0){var g=p.value;if(!lt(c[g][i]))return c[g][i]=null,!1;""===c[g][i]||null===c[g][i]?c[g][i]=null:(c[g][i]=c[g][i]*e,c[g][i]=Math.round(100*c[g][i])/100)}}catch(m){f=!0,h=m}finally{try{d||null==v.return||v.return()}finally{if(f)throw h}}}}catch(m){s=!0,o=m}finally{try{n||null==u.return||u.return()}finally{if(s)throw o}}return t},getTaskManHourStatistics:function(t){function e(t,e,a){for(var r=t.length,i=0;i<r;i++){var n=t[i];if(n[e]===a)return i}return!1}var a={group:"",children:[]},r=!0,i=!1,n=void 0;try{for(var s,o=this.optionList[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value;a[l]=0}}catch(H){i=!0,n=H}finally{try{r||null==o.return||o.return()}finally{if(i)throw n}}var u=[],c=this.optionList,d="days",f="group",h="superGroup",p=!0,v=!1,g=void 0;try{for(var m,y=t[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var b=m.value,w=e(u,"group",b[h]);if(!1!==w){var _=JSON.parse(JSON.stringify(a)),S=!0,j=!1,k=void 0;try{for(var x,C=c[Symbol.iterator]();!(S=(x=C.next()).done);S=!0){var D=x.value;if(ut(b[D][d])||(u[w][D]+=b[D][d],_[D]=b[D][d]),!ut(b[f])){var L=e(u[w]["children"],f,b[f]);!1!==L?u[w]["children"][L][D]+=b[D][d]:(_[f]=b[f],u[w]["children"].push(_))}}}catch(H){j=!0,k=H}finally{try{S||null==C.return||C.return()}finally{if(j)throw k}}}else{var O=JSON.parse(JSON.stringify(a)),T=JSON.parse(JSON.stringify(a));O["group"]=b["superGroup"],T["group"]=b["group"];var N=!0,R=!1,M=void 0;try{for(var P,z=c[Symbol.iterator]();!(N=(P=z.next()).done);N=!0){var A=P.value;O[A]=b[A]["days"]||0,T[A]=b[A]["days"]||0}}catch(H){R=!0,M=H}finally{try{N||null==z.return||z.return()}finally{if(R)throw M}}ut(b["group"])||O["children"].push(T),u.push(O)}}}catch(H){v=!0,g=H}finally{try{p||null==y.return||y.return()}finally{if(v)throw g}}return u}}},dt=ct,ft=(a("5a3b"),Object(b["a"])(dt,r,i,!1,null,"9092c90c",null));e["default"]=ft.exports},"779c":function(t,e,a){},"81a6":function(t,e,a){"use strict";var r=a("e0c6"),i=a.n(r);i.a},"8b1a":function(t,e,a){"use strict";var r=a("3a726"),i=a.n(r);i.a},c6cd:function(t,e,a){"use strict";var r=a("fa3e"),i=a.n(r);i.a},e0c6:function(t,e,a){},e801:function(t,e,a){"use strict";var r=a("ec2a"),i=a.n(r);i.a},ec2a:function(t,e,a){},fa3e:function(t,e,a){}}]);